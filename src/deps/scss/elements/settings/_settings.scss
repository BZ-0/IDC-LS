@use "@scss/color/colorvars" as cl;
@use "@scss/color/colorutils" as cu;
@use "@scss/core/classlets";
@use "@scss/core/themed";
@use "@scss/core/utils" as u;

//
@use "./windowed";

//
@mixin whenMobile {
    //
    & .content > * { grid-column: 1 / 2 span !important; }

    //
    &:not([data-current-page=""], :not([data-current-page])) {
        .ls-tabs {
            display: none !important;
        }
    }

    //
    &:is([data-current-page=""], :not([data-current-page])) {
        .ls-options {
            display: none !important;
        }
    }
}

//
@layer ls-windowed {
    
    //
    .ls-settings {
        //
        @extend .contain-size;
        @extend .ls-windowed;
        
        //
        container-name: ls-windowed ls-settings !important;
        
        //
        @container ls-settings (width < 9in) {
            @include whenMobile;
        }
        
        //
        //@media (width < 9in) {
            //@include whenMobile;
        //}
        
        //
        .ls-tab-item {
            max-block-size: 4rem;
        }
        
        //
        &[data-current-page="all-settings"] .ls-tab-item[data-page="all-settings"],
        &[data-current-page="grid-settings"] .ls-tab-item[data-page="grid-settings"],
        &[data-current-page="display-settings"] .ls-tab-item[data-page="display-settings"],
        &[data-current-page="experimental-settings"] .ls-tab-item[data-page="experimental-settings"] 
        { @extend .inverse; }
        
        //
        .ls-tab-item .in-element {
            box-sizing: border-box;
            max-block-size: 4rem;
            padding-inline: 0rem !important;
            padding: 1rem !important;
            
            & > * {
                @extend .stretch;
            }
        }
        
        //
        .content {
            display: grid;
            grid-template-columns: minmax(18rem, max-content) minmax(0px, 1fr);
            grid-row: content-b;
            
            //
            .form-description {
                @extend .stretch;
                @extend .align-center;
            
                //
                display: flex;
                padding: 1rem;
                opacity: 0.6;
                padding-block-end: 0rem;
                font-size: 0.8rem;
                
                //
                background-color: var(--current-surface-color);
            }

            //
            .ls-tabs { grid-column: 1 / 1; }
            .ls-options { grid-column: 2 / 2; position: relative; }

            //
            .ls-options {
                @extend .stretch;
            }
            
            
            //
            .block-decor {
                padding-inline-end: env(safe-area-inset-right, 0px) !important;
            }
            
            //
            .page-wrap {
                inset: 0px;
                position: absolute;

                //
                @include u.clamped-width(stretch, stretch, stretch);
                @include u.clamped-height(stretch, max-content, none);
            }
            
            //
            .opt-label {//
                @extend .align-center;
                @extend .stretch;
                @extend .no-wrap;
                @extend .align-inline-left;
                
                //
                display: flex;
            }

            //
            .ls-tabs {
                display: grid;
                grid-template-columns: minmax(2rem, max-content) minmax(0px, 1fr) minmax(2rem, max-content);
                grid-auto-rows: minmax(2rem, max-content);

                //
                padding: 0px;
                gap: 0px;

                //
                .ls-tab-item {
                    @extend .stretch;
                    
                    //
                    display: grid;

                    //
                    grid-template-columns: subgrid;
                    grid-template-rows: minmax(2rem, max-content);
                    grid-column: 1 / 3 span;
                    grid-row: auto;
                    padding: 0px;
        
                    //
                    padding-inline-start: env(safe-area-inset-left, 0px) !important;
        
                    //
                    min-block-size: max-content;
                }
            }
        }
    }
}
